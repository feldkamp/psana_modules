[psana]

# list of modules 
# PrintSeparator and PrintEventId are from psana package and do not need package name
#modules = PrintSeparator kitty.discriminate kitty.correct kitty.assemble kitty.correlate
modules = PrintSeparator kitty.discriminate kitty.correct kitty.assemble


# ---------------------------------------------------------------------------
[kitty.discriminate]
threshold = 1100



# ---------------------------------------------------------------------------
[kitty.correct]
# background and gain correction, expects 1D edf files
useBackground = 1
background = /reg/neh/home/feldkamp/ana/dark0018_1D.edf
useGainmap = 0
gainmap = /reg/neh/home/feldkamp/ana/flat0011_1D.edf



# ---------------------------------------------------------------------------
[kitty.assemble]
# create raw and assembled CSPAD images
outputPrefix = avg




# ---------------------------------------------------------------------------
[kitty.correlate]
# --output options--
# image formats to output
tifOut = 0
edfOut = 1
h5Out = 0
# toggle output for every single shot (default 0: write final averaged output to disk only)
singleOutput = 0

# --input options--
useBadPixelMask = 0
badPixelMask = /reg/d/psdm/CXI/cxi35711/calib
calibDir = /reg/d/psdm/CXI/cxi35711/calib

# --computation options--
autoCorrelateOnly = 1

# ...choose algorithm
# DIRECT COORDINATES, DIRECT XCCA (algorithm 1)
# FAST COORDINATES, FAST XCCA (algorithm 2)
# DIRECT COORDINATES, FAST XCCA (algorithm 3)
# FAST COORDINATES, DIRECT XCCA (algorithm 4)
algorithm = 2

# set dimensions of correlation 
# (nQ2 is only used when autoCorrelateOnly is turned off)
nPhi = 128
nQ1 = 20
nQ2 = 1

startQ = 400
stopQ = 600

# set size of the lookup table, only needed for alg 2 & 4
LUTx = 1000
LUTy = 1000
